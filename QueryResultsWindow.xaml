<Window
    x:Class="SigmaMS.QueryResultsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
    Title="Risultati Query"
    Width="1000"
    Height="600"
    WindowStartupLocation="CenterOwner">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  Header con informazioni query  -->
        <Border
            Grid.Row="0"
            Padding="10"
            Background="#f0f0f0">
            <StackPanel>
                <TextBlock
                    x:Name="txtQueryInfo"
                    FontSize="12"
                    FontWeight="Bold" />
                <StackPanel Margin="0,5,0,0" Orientation="Horizontal">
                    <TextBlock x:Name="txtStatus" FontSize="11" />
                    <TextBlock
                        x:Name="txtExecutionTime"
                        Margin="20,0,0,0"
                        FontSize="11" />
                    <TextBlock
                        x:Name="txtRowCount"
                        Margin="20,0,0,0"
                        FontSize="11" />
                </StackPanel>
            </StackPanel>
        </Border>

        <!--  Contenuto principale  -->
        <dx:DXTabControl
            x:Name="tabResults"
            Grid.Row="1"
            Margin="5">
            <!--  I tab verranno aggiunti dinamicamente  -->
        </dx:DXTabControl>

        <!--  Footer con pulsanti  -->
        <Border
            Grid.Row="2"
            Padding="10"
            Background="#f0f0f0">
            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                <CheckBox
                    x:Name="chkEnableFiltering"
                    Margin="0,0,20,0"
                    VerticalAlignment="Center"
                    Checked="ChkEnableFiltering_Changed"
                    Content="Abilita Filtri Colonne"
                    Unchecked="ChkEnableFiltering_Changed" />
                <CheckBox
                    x:Name="chkEnableGrouping"
                    Margin="0,0,20,0"
                    VerticalAlignment="Center"
                    Checked="ChkEnableGrouping_Changed"
                    Content="Abilita Raggruppamento"
                    Unchecked="ChkEnableGrouping_Changed" />
                <Button
                    x:Name="btnExportExcel"
                    Width="120"
                    Height="30"
                    Margin="0,0,10,0"
                    Click="BtnExportExcel_Click"
                    Content="📊 Esporta Excel" />
                <Button
                    x:Name="btnExportCsv"
                    Width="100"
                    Height="30"
                    Margin="0,0,10,0"
                    Click="BtnExportCsv_Click"
                    Content="📄 Esporta CSV" />
                <Button
                    x:Name="btnCopyResults"
                    Width="120"
                    Height="30"
                    Click="BtnCopyResults_Click"
                    Content="📋 Copia Risultati" />
            </StackPanel>
        </Border>
    </Grid>
</Window>